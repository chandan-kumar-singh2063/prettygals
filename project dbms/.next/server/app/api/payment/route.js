/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/payment/route";
exports.ids = ["app/api/payment/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpayment%2Froute&page=%2Fapi%2Fpayment%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment%2Froute.js&appDir=D%3A%5CNew%20folder%5Cproject%20dbms%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CNew%20folder%5Cproject%20dbms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpayment%2Froute&page=%2Fapi%2Fpayment%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment%2Froute.js&appDir=D%3A%5CNew%20folder%5Cproject%20dbms%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CNew%20folder%5Cproject%20dbms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_New_folder_project_dbms_src_app_api_payment_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/payment/route.js */ \"(rsc)/./src/app/api/payment/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/payment/route\",\n        pathname: \"/api/payment\",\n        filename: \"route\",\n        bundlePath: \"app/api/payment/route\"\n    },\n    resolvedPagePath: \"D:\\\\New folder\\\\project dbms\\\\src\\\\app\\\\api\\\\payment\\\\route.js\",\n    nextConfigOutput,\n    userland: D_New_folder_project_dbms_src_app_api_payment_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZwYXltZW50JTJGcm91dGUmcGFnZT0lMkZhcGklMkZwYXltZW50JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcGF5bWVudCUyRnJvdXRlLmpzJmFwcERpcj1EJTNBJTVDTmV3JTIwZm9sZGVyJTVDcHJvamVjdCUyMGRibXMlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUQlM0ElNUNOZXclMjBmb2xkZXIlNUNwcm9qZWN0JTIwZGJtcyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDYztBQUMzRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZWF1dHktZWNvbW1lcmNlLz9lMTM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJEOlxcXFxOZXcgZm9sZGVyXFxcXHByb2plY3QgZGJtc1xcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxwYXltZW50XFxcXHJvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wYXltZW50L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcGF5bWVudFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcGF5bWVudC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkQ6XFxcXE5ldyBmb2xkZXJcXFxccHJvamVjdCBkYm1zXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHBheW1lbnRcXFxccm91dGUuanNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpayment%2Froute&page=%2Fapi%2Fpayment%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment%2Froute.js&appDir=D%3A%5CNew%20folder%5Cproject%20dbms%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CNew%20folder%5Cproject%20dbms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/payment/route.js":
/*!**************************************!*\
  !*** ./src/app/api/payment/route.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/mongodb */ \"(rsc)/./src/lib/mongodb.js\");\n/* harmony import */ var _models_Order__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../models/Order */ \"(rsc)/./src/models/Order.js\");\n/* harmony import */ var _models_Cart__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../models/Cart */ \"(rsc)/./src/models/Cart.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../lib/auth */ \"(rsc)/./src/lib/auth.js\");\n\n\n\n\n\nasync function POST(request) {\n    try {\n        console.log('Payment API - Starting...');\n        const { cart, user, total, paymentMethod, phone } = await request.json();\n        if (!cart || !user || !total || !paymentMethod || !phone) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Missing required fields: cart, user, total, paymentMethod, phone'\n            }, {\n                status: 400\n            });\n        }\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        // Calculate order totals\n        const subtotal = cart.reduce((sum, item)=>sum + item.price * item.quantity, 0);\n        const tax = subtotal * 0.1;\n        const shipping = subtotal > 50 ? 0 : 5.99;\n        const calculatedTotal = subtotal + tax + shipping;\n        // Create order data\n        const orderData = {\n            user: user.id,\n            orderNumber: 'PG' + Date.now() + Math.floor(Math.random() * 1000),\n            items: cart.map((item)=>({\n                    productId: item.productId || item.id,\n                    name: item.name,\n                    quantity: item.quantity,\n                    price: item.price,\n                    total: item.price * item.quantity\n                })),\n            subtotal,\n            tax,\n            shipping,\n            total: calculatedTotal,\n            totalAmount: calculatedTotal,\n            paymentMethod,\n            paymentStatus: 'pending',\n            orderStatus: 'pending',\n            shippingAddress: {\n                name: user.name,\n                phone: phone,\n                email: user.email,\n                street: \"Customer Address\",\n                city: \"Customer City\",\n                state: \"Customer State\",\n                zipCode: \"00000\",\n                country: \"Nepal\"\n            }\n        };\n        console.log('Creating order with data:', orderData);\n        // Create order in database\n        let order;\n        try {\n            order = new _models_Order__WEBPACK_IMPORTED_MODULE_2__[\"default\"](orderData);\n            await order.save();\n            console.log('Order created successfully:', order._id);\n        } catch (validationError) {\n            console.error('Order validation failed:', validationError.message);\n            console.error('Validation details:', validationError.errors);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Order validation failed: ' + validationError.message,\n                details: validationError.errors\n            }, {\n                status: 400\n            });\n        }\n        // Handle Khalti payment only\n        if (paymentMethod === 'khalti') {\n            const khaltiPayload = {\n                return_url: `http://localhost:3001/payment/success?order_id=${order._id}`,\n                website_url: 'http://localhost:3001',\n                amount: Math.round(calculatedTotal * 100),\n                purchase_order_id: order._id.toString(),\n                purchase_order_name: `PrettyGals Order ${order.orderNumber}`,\n                customer_info: {\n                    name: user.name || 'Customer',\n                    email: user.email,\n                    phone: phone\n                },\n                product_details: order.items.map((item)=>({\n                        identity: item.productId,\n                        name: item.name,\n                        total_price: Math.round(item.total * 100),\n                        quantity: item.quantity,\n                        unit_price: Math.round(item.price * 100)\n                    }))\n            };\n            console.log('Initiating Khalti payment:', khaltiPayload);\n            // Call Khalti payment initiation API\n            const khaltiResponse = await fetch('https://a.khalti.com/api/v2/epayment/initiate/', {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Key ${process.env.KHALTI_SECRET_KEY || 'test_secret_key_f59e8b7d18b4499ca40f68195a846e9b'}`,\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(khaltiPayload)\n            });\n            if (!khaltiResponse.ok) {\n                const errorData = await khaltiResponse.text();\n                console.error('Khalti API error:', errorData);\n                // Mark order as failed\n                order.paymentStatus = 'failed';\n                order.orderStatus = 'cancelled';\n                await order.save();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: 'Payment initiation failed. Please try again.'\n                }, {\n                    status: 500\n                });\n            }\n            const khaltiData = await khaltiResponse.json();\n            console.log('Khalti payment initiated:', khaltiData);\n            // Store Khalti payment details in order\n            order.paymentDetails = {\n                pidx: khaltiData.pidx,\n                paymentUrl: khaltiData.payment_url\n            };\n            await order.save();\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: 'Khalti payment initiated successfully',\n                order_id: order._id.toString(),\n                order_number: order.orderNumber,\n                total: calculatedTotal,\n                payment_url: khaltiData.payment_url,\n                pidx: khaltiData.pidx\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Unsupported payment method'\n        }, {\n            status: 400\n        });\n    } catch (error) {\n        console.error('Payment API error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error: ' + error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YixlQUFldEQsSUFBSTtZQUM1Q1AsUUFBUUMsR0FBRyxDQUFDLDZCQUE2QnlFO1lBRXpDLHdDQUF3QztZQUN4Q2pDLE1BQU1rQyxjQUFjLEdBQUc7Z0JBQ3JCQyxNQUFNRixXQUFXRSxJQUFJO2dCQUNyQkMsWUFBWUgsV0FBV0ksV0FBVztZQUNwQztZQUNBLE1BQU1yQyxNQUFNQyxJQUFJO1lBRWhCLE9BQU9qRCxxREFBWUEsQ0FBQ2MsSUFBSSxDQUFDO2dCQUN2QndFLFNBQVM7Z0JBQ1RsQyxTQUFTO2dCQUNUbUMsVUFBVXZDLE1BQU1FLEdBQUcsQ0FBQ1csUUFBUTtnQkFDNUIyQixjQUFjeEMsTUFBTXBCLFdBQVc7Z0JBQy9CakIsT0FBT2M7Z0JBQ1A0RCxhQUFhSixXQUFXSSxXQUFXO2dCQUNuQ0YsTUFBTUYsV0FBV0UsSUFBSTtZQUN2QjtRQUNGO1FBRUEsT0FBT25GLHFEQUFZQSxDQUFDYyxJQUFJLENBQUM7WUFDdkJDLE9BQU87UUFDVCxHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUVuQixFQUFFLE9BQU9ELE9BQU87UUFDZFIsUUFBUVEsS0FBSyxDQUFDLHNCQUFzQkE7UUFDcEMsT0FBT2YscURBQVlBLENBQUNjLElBQUksQ0FBQztZQUN2QkMsT0FBTyw0QkFBNEJBLE1BQU1xQyxPQUFPO1FBQ2xELEdBQUc7WUFBRXBDLFFBQVE7UUFBSTtJQUNuQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmVhdXR5LWVjb21tZXJjZS8uL3NyYy9hcHAvYXBpL3BheW1lbnQvcm91dGUuanM/MjdmZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCBjb25uZWN0REIgZnJvbSAnLi4vLi4vLi4vbGliL21vbmdvZGInO1xyXG5pbXBvcnQgT3JkZXIgZnJvbSAnLi4vLi4vLi4vbW9kZWxzL09yZGVyJztcclxuaW1wb3J0IENhcnQgZnJvbSAnLi4vLi4vLi4vbW9kZWxzL0NhcnQnO1xyXG5pbXBvcnQgeyB2ZXJpZnlUb2tlbiB9IGZyb20gJy4uLy4uLy4uL2xpYi9hdXRoJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ1BheW1lbnQgQVBJIC0gU3RhcnRpbmcuLi4nKTtcclxuICAgIFxyXG4gICAgY29uc3QgeyBjYXJ0LCB1c2VyLCB0b3RhbCwgcGF5bWVudE1ldGhvZCwgcGhvbmUgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG5cclxuICAgIGlmICghY2FydCB8fCAhdXNlciB8fCAhdG90YWwgfHwgIXBheW1lbnRNZXRob2QgfHwgIXBob25lKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxyXG4gICAgICAgIGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6IGNhcnQsIHVzZXIsIHRvdGFsLCBwYXltZW50TWV0aG9kLCBwaG9uZScgXHJcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgY29ubmVjdERCKCk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIG9yZGVyIHRvdGFsc1xyXG4gICAgY29uc3Qgc3VidG90YWwgPSBjYXJ0LnJlZHVjZSgoc3VtLCBpdGVtKSA9PiBzdW0gKyAoaXRlbS5wcmljZSAqIGl0ZW0ucXVhbnRpdHkpLCAwKTtcclxuICAgIGNvbnN0IHRheCA9IHN1YnRvdGFsICogMC4xO1xyXG4gICAgY29uc3Qgc2hpcHBpbmcgPSBzdWJ0b3RhbCA+IDUwID8gMCA6IDUuOTk7XHJcbiAgICBjb25zdCBjYWxjdWxhdGVkVG90YWwgPSBzdWJ0b3RhbCArIHRheCArIHNoaXBwaW5nO1xyXG5cclxuICAgIC8vIENyZWF0ZSBvcmRlciBkYXRhXHJcbiAgICBjb25zdCBvcmRlckRhdGEgPSB7XHJcbiAgICAgIHVzZXI6IHVzZXIuaWQsXHJcbiAgICAgIG9yZGVyTnVtYmVyOiAnUEcnICsgRGF0ZS5ub3coKSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDApLFxyXG4gICAgICBpdGVtczogY2FydC5tYXAoaXRlbSA9PiAoe1xyXG4gICAgICAgIHByb2R1Y3RJZDogaXRlbS5wcm9kdWN0SWQgfHwgaXRlbS5pZCxcclxuICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXHJcbiAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksXHJcbiAgICAgICAgcHJpY2U6IGl0ZW0ucHJpY2UsXHJcbiAgICAgICAgdG90YWw6IGl0ZW0ucHJpY2UgKiBpdGVtLnF1YW50aXR5XHJcbiAgICAgIH0pKSxcclxuICAgICAgc3VidG90YWwsXHJcbiAgICAgIHRheCxcclxuICAgICAgc2hpcHBpbmcsXHJcbiAgICAgIHRvdGFsOiBjYWxjdWxhdGVkVG90YWwsXHJcbiAgICAgIHRvdGFsQW1vdW50OiBjYWxjdWxhdGVkVG90YWwsXHJcbiAgICAgIHBheW1lbnRNZXRob2QsXHJcbiAgICAgIHBheW1lbnRTdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgICAgb3JkZXJTdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgICAgc2hpcHBpbmdBZGRyZXNzOiB7XHJcbiAgICAgICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgICAgIHBob25lOiBwaG9uZSxcclxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICBzdHJlZXQ6IFwiQ3VzdG9tZXIgQWRkcmVzc1wiLFxyXG4gICAgICAgIGNpdHk6IFwiQ3VzdG9tZXIgQ2l0eVwiLFxyXG4gICAgICAgIHN0YXRlOiBcIkN1c3RvbWVyIFN0YXRlXCIsXHJcbiAgICAgICAgemlwQ29kZTogXCIwMDAwMFwiLFxyXG4gICAgICAgIGNvdW50cnk6IFwiTmVwYWxcIlxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBvcmRlciB3aXRoIGRhdGE6Jywgb3JkZXJEYXRhKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgb3JkZXIgaW4gZGF0YWJhc2VcclxuICAgIGxldCBvcmRlcjtcclxuICAgIHRyeSB7XHJcbiAgICAgIG9yZGVyID0gbmV3IE9yZGVyKG9yZGVyRGF0YSk7XHJcbiAgICAgIGF3YWl0IG9yZGVyLnNhdmUoKTtcclxuICAgICAgY29uc29sZS5sb2coJ09yZGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OicsIG9yZGVyLl9pZCk7XHJcbiAgICB9IGNhdGNoICh2YWxpZGF0aW9uRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignT3JkZXIgdmFsaWRhdGlvbiBmYWlsZWQ6JywgdmFsaWRhdGlvbkVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdWYWxpZGF0aW9uIGRldGFpbHM6JywgdmFsaWRhdGlvbkVycm9yLmVycm9ycyk7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxyXG4gICAgICAgIGVycm9yOiAnT3JkZXIgdmFsaWRhdGlvbiBmYWlsZWQ6ICcgKyB2YWxpZGF0aW9uRXJyb3IubWVzc2FnZSxcclxuICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uRXJyb3IuZXJyb3JzXHJcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGFuZGxlIEtoYWx0aSBwYXltZW50IG9ubHlcclxuICAgIGlmIChwYXltZW50TWV0aG9kID09PSAna2hhbHRpJykge1xyXG4gICAgICBjb25zdCBraGFsdGlQYXlsb2FkID0ge1xyXG4gICAgICAgIHJldHVybl91cmw6IGBodHRwOi8vbG9jYWxob3N0OjMwMDEvcGF5bWVudC9zdWNjZXNzP29yZGVyX2lkPSR7b3JkZXIuX2lkfWAsXHJcbiAgICAgICAgd2Vic2l0ZV91cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDEnLFxyXG4gICAgICAgIGFtb3VudDogTWF0aC5yb3VuZChjYWxjdWxhdGVkVG90YWwgKiAxMDApLCAvLyBDb252ZXJ0IHRvIHBhaXNhXHJcbiAgICAgICAgcHVyY2hhc2Vfb3JkZXJfaWQ6IG9yZGVyLl9pZC50b1N0cmluZygpLFxyXG4gICAgICAgIHB1cmNoYXNlX29yZGVyX25hbWU6IGBQcmV0dHlHYWxzIE9yZGVyICR7b3JkZXIub3JkZXJOdW1iZXJ9YCxcclxuICAgICAgICBjdXN0b21lcl9pbmZvOiB7XHJcbiAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUgfHwgJ0N1c3RvbWVyJyxcclxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICAgICAgcGhvbmU6IHBob25lXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcm9kdWN0X2RldGFpbHM6IG9yZGVyLml0ZW1zLm1hcChpdGVtID0+ICh7XHJcbiAgICAgICAgICBpZGVudGl0eTogaXRlbS5wcm9kdWN0SWQsXHJcbiAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXHJcbiAgICAgICAgICB0b3RhbF9wcmljZTogTWF0aC5yb3VuZChpdGVtLnRvdGFsICogMTAwKSxcclxuICAgICAgICAgIHF1YW50aXR5OiBpdGVtLnF1YW50aXR5LFxyXG4gICAgICAgICAgdW5pdF9wcmljZTogTWF0aC5yb3VuZChpdGVtLnByaWNlICogMTAwKVxyXG4gICAgICAgIH0pKVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ0luaXRpYXRpbmcgS2hhbHRpIHBheW1lbnQ6Jywga2hhbHRpUGF5bG9hZCk7XHJcblxyXG4gICAgICAvLyBDYWxsIEtoYWx0aSBwYXltZW50IGluaXRpYXRpb24gQVBJXHJcbiAgICAgIGNvbnN0IGtoYWx0aVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYS5raGFsdGkuY29tL2FwaS92Mi9lcGF5bWVudC9pbml0aWF0ZS8nLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgS2V5ICR7cHJvY2Vzcy5lbnYuS0hBTFRJX1NFQ1JFVF9LRVkgfHwgJ3Rlc3Rfc2VjcmV0X2tleV9mNTllOGI3ZDE4YjQ0OTljYTQwZjY4MTk1YTg0NmU5Yid9YCxcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShraGFsdGlQYXlsb2FkKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICgha2hhbHRpUmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCBraGFsdGlSZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignS2hhbHRpIEFQSSBlcnJvcjonLCBlcnJvckRhdGEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE1hcmsgb3JkZXIgYXMgZmFpbGVkXHJcbiAgICAgICAgb3JkZXIucGF5bWVudFN0YXR1cyA9ICdmYWlsZWQnO1xyXG4gICAgICAgIG9yZGVyLm9yZGVyU3RhdHVzID0gJ2NhbmNlbGxlZCc7XHJcbiAgICAgICAgYXdhaXQgb3JkZXIuc2F2ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxyXG4gICAgICAgICAgZXJyb3I6ICdQYXltZW50IGluaXRpYXRpb24gZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLicgXHJcbiAgICAgICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qga2hhbHRpRGF0YSA9IGF3YWl0IGtoYWx0aVJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgY29uc29sZS5sb2coJ0toYWx0aSBwYXltZW50IGluaXRpYXRlZDonLCBraGFsdGlEYXRhKTtcclxuXHJcbiAgICAgIC8vIFN0b3JlIEtoYWx0aSBwYXltZW50IGRldGFpbHMgaW4gb3JkZXJcclxuICAgICAgb3JkZXIucGF5bWVudERldGFpbHMgPSB7XHJcbiAgICAgICAgcGlkeDoga2hhbHRpRGF0YS5waWR4LFxyXG4gICAgICAgIHBheW1lbnRVcmw6IGtoYWx0aURhdGEucGF5bWVudF91cmxcclxuICAgICAgfTtcclxuICAgICAgYXdhaXQgb3JkZXIuc2F2ZSgpO1xyXG5cclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdLaGFsdGkgcGF5bWVudCBpbml0aWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgICBvcmRlcl9pZDogb3JkZXIuX2lkLnRvU3RyaW5nKCksXHJcbiAgICAgICAgb3JkZXJfbnVtYmVyOiBvcmRlci5vcmRlck51bWJlcixcclxuICAgICAgICB0b3RhbDogY2FsY3VsYXRlZFRvdGFsLFxyXG4gICAgICAgIHBheW1lbnRfdXJsOiBraGFsdGlEYXRhLnBheW1lbnRfdXJsLFxyXG4gICAgICAgIHBpZHg6IGtoYWx0aURhdGEucGlkeFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcclxuICAgICAgZXJyb3I6ICdVbnN1cHBvcnRlZCBwYXltZW50IG1ldGhvZCcgXHJcbiAgICB9LCB7IHN0YXR1czogNDAwIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignUGF5bWVudCBBUEkgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXHJcbiAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yOiAnICsgZXJyb3IubWVzc2FnZSBcclxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNvbm5lY3REQiIsIk9yZGVyIiwiQ2FydCIsInZlcmlmeVRva2VuIiwiUE9TVCIsInJlcXVlc3QiLCJjb25zb2xlIiwibG9nIiwiY2FydCIsInVzZXIiLCJ0b3RhbCIsInBheW1lbnRNZXRob2QiLCJwaG9uZSIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInN1YnRvdGFsIiwicmVkdWNlIiwic3VtIiwiaXRlbSIsInByaWNlIiwicXVhbnRpdHkiLCJ0YXgiLCJzaGlwcGluZyIsImNhbGN1bGF0ZWRUb3RhbCIsIm9yZGVyRGF0YSIsImlkIiwib3JkZXJOdW1iZXIiLCJEYXRlIiwibm93IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaXRlbXMiLCJtYXAiLCJwcm9kdWN0SWQiLCJuYW1lIiwidG90YWxBbW91bnQiLCJwYXltZW50U3RhdHVzIiwib3JkZXJTdGF0dXMiLCJzaGlwcGluZ0FkZHJlc3MiLCJlbWFpbCIsInN0cmVldCIsImNpdHkiLCJzdGF0ZSIsInppcENvZGUiLCJjb3VudHJ5Iiwib3JkZXIiLCJzYXZlIiwiX2lkIiwidmFsaWRhdGlvbkVycm9yIiwibWVzc2FnZSIsImVycm9ycyIsImRldGFpbHMiLCJraGFsdGlQYXlsb2FkIiwicmV0dXJuX3VybCIsIndlYnNpdGVfdXJsIiwiYW1vdW50Iiwicm91bmQiLCJwdXJjaGFzZV9vcmRlcl9pZCIsInRvU3RyaW5nIiwicHVyY2hhc2Vfb3JkZXJfbmFtZSIsImN1c3RvbWVyX2luZm8iLCJwcm9kdWN0X2RldGFpbHMiLCJpZGVudGl0eSIsInRvdGFsX3ByaWNlIiwidW5pdF9wcmljZSIsImtoYWx0aVJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwicHJvY2VzcyIsImVudiIsIktIQUxUSV9TRUNSRVRfS0VZIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsImVycm9yRGF0YSIsInRleHQiLCJraGFsdGlEYXRhIiwicGF5bWVudERldGFpbHMiLCJwaWR4IiwicGF5bWVudFVybCIsInBheW1lbnRfdXJsIiwic3VjY2VzcyIsIm9yZGVyX2lkIiwib3JkZXJfbnVtYmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/payment/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.js":
/*!*************************!*\
  !*** ./src/lib/auth.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateUser: () => (/* binding */ authenticateUser),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/User */ \"(rsc)/./src/models/User.js\");\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./mongodb */ \"(rsc)/./src/lib/mongodb.js\");\n\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key-change-in-production';\nconst generateToken = (userId)=>{\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n        userId\n    }, JWT_SECRET, {\n        expiresIn: '7d'\n    });\n};\nconst verifyToken = (token)=>{\n    try {\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n    } catch (error) {\n        return null;\n    }\n};\nconst authenticateUser = async (req)=>{\n    try {\n        const token = req.headers.authorization?.replace('Bearer ', '');\n        if (!token) {\n            return null;\n        }\n        const decoded = verifyToken(token);\n        if (!decoded) {\n            return null;\n        }\n        await (0,_mongodb__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n        const user = await _models_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findById(decoded.userId).select('-password');\n        return user;\n    } catch (error) {\n        console.error('Authentication error:', error);\n        return null;\n    }\n};\nconst requireAuth = (handler)=>{\n    return async (req)=>{\n        const user = await authenticateUser(req);\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                error: 'Authentication required'\n            }, {\n                status: 401\n            });\n        }\n        req.user = user;\n        return handler(req);\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQStCO0FBQ1k7QUFDVDtBQUNBO0FBRWxDLE1BQU1JLGFBQWFDLFFBQVFDLEdBQUcsQ0FBQ0YsVUFBVSxJQUFJO0FBRXRDLE1BQU1HLGdCQUFnQixDQUFDQztJQUM1QixPQUFPUix3REFBUSxDQUFDO1FBQUVRO0lBQU8sR0FBR0osWUFBWTtRQUFFTSxXQUFXO0lBQUs7QUFDNUQsRUFBRTtBQUVLLE1BQU1DLGNBQWMsQ0FBQ0M7SUFDMUIsSUFBSTtRQUNGLE9BQU9aLDBEQUFVLENBQUNZLE9BQU9SO0lBQzNCLEVBQUUsT0FBT1UsT0FBTztRQUNkLE9BQU87SUFDVDtBQUNGLEVBQUU7QUFFSyxNQUFNQyxtQkFBbUIsT0FBT0M7SUFDckMsSUFBSTtRQUNGLE1BQU1KLFFBQVFJLElBQUlDLE9BQU8sQ0FBQ0MsYUFBYSxFQUFFQyxRQUFRLFdBQVc7UUFFNUQsSUFBSSxDQUFDUCxPQUFPO1lBQ1YsT0FBTztRQUNUO1FBRUEsTUFBTVEsVUFBVVQsWUFBWUM7UUFDNUIsSUFBSSxDQUFDUSxTQUFTO1lBQ1osT0FBTztRQUNUO1FBRUEsTUFBTWpCLG9EQUFTQTtRQUNmLE1BQU1rQixPQUFPLE1BQU1uQixvREFBSUEsQ0FBQ29CLFFBQVEsQ0FBQ0YsUUFBUVosTUFBTSxFQUFFZSxNQUFNLENBQUM7UUFFeEQsT0FBT0Y7SUFDVCxFQUFFLE9BQU9QLE9BQU87UUFDZFUsUUFBUVYsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsT0FBTztJQUNUO0FBQ0YsRUFBRTtBQUVLLE1BQU1XLGNBQWMsQ0FBQ0M7SUFDMUIsT0FBTyxPQUFPVjtRQUNaLE1BQU1LLE9BQU8sTUFBTU4saUJBQWlCQztRQUVwQyxJQUFJLENBQUNLLE1BQU07WUFDVCxPQUFPcEIscURBQVlBLENBQUMwQixJQUFJLENBQ3RCO2dCQUFFYixPQUFPO1lBQTBCLEdBQ25DO2dCQUFFYyxRQUFRO1lBQUk7UUFFbEI7UUFFQVosSUFBSUssSUFBSSxHQUFHQTtRQUNYLE9BQU9LLFFBQVFWO0lBQ2pCO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2JlYXV0eS1lY29tbWVyY2UvLi9zcmMvbGliL2F1dGguanM/ODdiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWxzL1VzZXInO1xyXG5pbXBvcnQgY29ubmVjdERCIGZyb20gJy4vbW9uZ29kYic7XHJcblxyXG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAneW91ci1zZWNyZXQta2V5LWNoYW5nZS1pbi1wcm9kdWN0aW9uJztcclxuXHJcbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVRva2VuID0gKHVzZXJJZCkgPT4ge1xyXG4gIHJldHVybiBqd3Quc2lnbih7IHVzZXJJZCB9LCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogJzdkJyB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2ZXJpZnlUb2tlbiA9ICh0b2tlbikgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBhdXRoZW50aWNhdGVVc2VyID0gYXN5bmMgKHJlcSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24/LnJlcGxhY2UoJ0JlYXJlciAnLCAnJyk7XHJcbiAgICBcclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGVjb2RlZCA9IHZlcmlmeVRva2VuKHRva2VuKTtcclxuICAgIGlmICghZGVjb2RlZCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBjb25uZWN0REIoKTtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKGRlY29kZWQudXNlcklkKS5zZWxlY3QoJy1wYXNzd29yZCcpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gdXNlcjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQXV0aGVudGljYXRpb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlcXVpcmVBdXRoID0gKGhhbmRsZXIpID0+IHtcclxuICByZXR1cm4gYXN5bmMgKHJlcSkgPT4ge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGF1dGhlbnRpY2F0ZVVzZXIocmVxKTtcclxuICAgIFxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJlcS51c2VyID0gdXNlcjtcclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSk7XHJcbiAgfTtcclxufTtcclxuIl0sIm5hbWVzIjpbImp3dCIsIk5leHRSZXNwb25zZSIsIlVzZXIiLCJjb25uZWN0REIiLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsImdlbmVyYXRlVG9rZW4iLCJ1c2VySWQiLCJzaWduIiwiZXhwaXJlc0luIiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsInZlcmlmeSIsImVycm9yIiwiYXV0aGVudGljYXRlVXNlciIsInJlcSIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwicmVwbGFjZSIsImRlY29kZWQiLCJ1c2VyIiwiZmluZEJ5SWQiLCJzZWxlY3QiLCJjb25zb2xlIiwicmVxdWlyZUF1dGgiLCJoYW5kbGVyIiwianNvbiIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/mongodb.js":
/*!****************************!*\
  !*** ./src/lib/mongodb.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI || 'mongodb://localhost:27017/beauty-ecommerce';\nif (!MONGODB_URI) {\n    throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectDB() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectDB);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21vbmdvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0YsV0FBVyxJQUFJO0FBRS9DLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFFQSxJQUFJQyxTQUFTQyxPQUFPTixRQUFRO0FBRTVCLElBQUksQ0FBQ0ssUUFBUTtJQUNYQSxTQUFTQyxPQUFPTixRQUFRLEdBQUc7UUFBRU8sTUFBTTtRQUFNQyxTQUFTO0lBQUs7QUFDekQ7QUFFQSxlQUFlQztJQUNiLElBQUlKLE9BQU9FLElBQUksRUFBRTtRQUNmLE9BQU9GLE9BQU9FLElBQUk7SUFDcEI7SUFFQSxJQUFJLENBQUNGLE9BQU9HLE9BQU8sRUFBRTtRQUNuQixNQUFNRSxPQUFPO1lBQ1hDLGdCQUFnQjtRQUNsQjtRQUVBTixPQUFPRyxPQUFPLEdBQUdSLHVEQUFnQixDQUFDQyxhQUFhUyxNQUFNRyxJQUFJLENBQUMsQ0FBQ2I7WUFDekQsT0FBT0E7UUFDVDtJQUNGO0lBRUEsSUFBSTtRQUNGSyxPQUFPRSxJQUFJLEdBQUcsTUFBTUYsT0FBT0csT0FBTztJQUNwQyxFQUFFLE9BQU9NLEdBQUc7UUFDVlQsT0FBT0csT0FBTyxHQUFHO1FBQ2pCLE1BQU1NO0lBQ1I7SUFFQSxPQUFPVCxPQUFPRSxJQUFJO0FBQ3BCO0FBRUEsaUVBQWVFLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZWF1dHktZWNvbW1lcmNlLy4vc3JjL2xpYi9tb25nb2RiLmpzPzhiMDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkgfHwgJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvYmVhdXR5LWVjb21tZXJjZSc7XHJcblxyXG5pZiAoIU1PTkdPREJfVVJJKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZGVmaW5lIHRoZSBNT05HT0RCX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnNpZGUgLmVudi5sb2NhbCcpO1xyXG59XHJcblxyXG5sZXQgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlO1xyXG5cclxuaWYgKCFjYWNoZWQpIHtcclxuICBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2UgPSB7IGNvbm46IG51bGwsIHByb21pc2U6IG51bGwgfTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY29ubmVjdERCKCkge1xyXG4gIGlmIChjYWNoZWQuY29ubikge1xyXG4gICAgcmV0dXJuIGNhY2hlZC5jb25uO1xyXG4gIH1cclxuXHJcbiAgaWYgKCFjYWNoZWQucHJvbWlzZSkge1xyXG4gICAgY29uc3Qgb3B0cyA9IHtcclxuICAgICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLFxyXG4gICAgfTtcclxuXHJcbiAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkksIG9wdHMpLnRoZW4oKG1vbmdvb3NlKSA9PiB7XHJcbiAgICAgIHJldHVybiBtb25nb29zZTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNhY2hlZC5jb25uID0gYXdhaXQgY2FjaGVkLnByb21pc2U7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xyXG4gICAgdGhyb3cgZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBjYWNoZWQuY29ubjtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdERCO1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiY29ubmVjdERCIiwib3B0cyIsImJ1ZmZlckNvbW1hbmRzIiwiY29ubmVjdCIsInRoZW4iLCJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/mongodb.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Cart.js":
/*!****************************!*\
  !*** ./src/models/Cart.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst CartItemSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    productId: {\n        type: String,\n        required: true\n    },\n    name: {\n        type: String,\n        required: true\n    },\n    price: {\n        type: Number,\n        required: true\n    },\n    image: {\n        type: String,\n        required: false,\n        default: 'https://via.placeholder.com/150'\n    },\n    quantity: {\n        type: Number,\n        required: true,\n        min: [\n            1,\n            'Quantity must be at least 1'\n        ]\n    }\n}, {\n    _id: false\n});\nconst CartSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    userId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    items: [\n        CartItemSchema\n    ],\n    total: {\n        type: Number,\n        default: 0\n    },\n    itemCount: {\n        type: Number,\n        default: 0\n    }\n}, {\n    timestamps: true\n});\n// Calculate total and item count before saving\nCartSchema.pre('save', function(next) {\n    this.itemCount = this.items.reduce((total, item)=>total + item.quantity, 0);\n    this.total = this.items.reduce((total, item)=>total + item.price * item.quantity, 0);\n    next();\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Cart || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Cart', CartSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL0NhcnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLE1BQU1DLGlCQUFpQixJQUFJRCx3REFBZSxDQUFDO0lBQ3pDRyxXQUFXO1FBQ1RDLE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtJQUNBQyxNQUFNO1FBQ0pILE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtJQUNBRSxPQUFPO1FBQ0xKLE1BQU1LO1FBQ05ILFVBQVU7SUFDWjtJQUNBSSxPQUFPO1FBQ0xOLE1BQU1DO1FBQ05DLFVBQVU7UUFDVkssU0FBUztJQUNYO0lBQ0FDLFVBQVU7UUFDUlIsTUFBTUs7UUFDTkgsVUFBVTtRQUNWTyxLQUFLO1lBQUM7WUFBRztTQUE4QjtJQUN6QztBQUNGLEdBQUc7SUFDREMsS0FBSztBQUNQO0FBRUEsTUFBTUMsYUFBYSxJQUFJZix3REFBZSxDQUFDO0lBQ3JDZ0IsUUFBUTtRQUNOWixNQUFNQztRQUNOQyxVQUFVO1FBQ1ZXLFFBQVE7SUFDVjtJQUNBQyxPQUFPO1FBQUNqQjtLQUFlO0lBQ3ZCa0IsT0FBTztRQUNMZixNQUFNSztRQUNORSxTQUFTO0lBQ1g7SUFDQVMsV0FBVztRQUNUaEIsTUFBTUs7UUFDTkUsU0FBUztJQUNYO0FBQ0YsR0FBRztJQUNEVSxZQUFZO0FBQ2Q7QUFFQSwrQ0FBK0M7QUFDL0NOLFdBQVdPLEdBQUcsQ0FBQyxRQUFRLFNBQVNDLElBQUk7SUFDbEMsSUFBSSxDQUFDSCxTQUFTLEdBQUcsSUFBSSxDQUFDRixLQUFLLENBQUNNLE1BQU0sQ0FBQyxDQUFDTCxPQUFPTSxPQUFTTixRQUFRTSxLQUFLYixRQUFRLEVBQUU7SUFDM0UsSUFBSSxDQUFDTyxLQUFLLEdBQUcsSUFBSSxDQUFDRCxLQUFLLENBQUNNLE1BQU0sQ0FBQyxDQUFDTCxPQUFPTSxPQUFTTixRQUFTTSxLQUFLakIsS0FBSyxHQUFHaUIsS0FBS2IsUUFBUSxFQUFHO0lBQ3RGVztBQUNGO0FBRUEsaUVBQWV2Qix3REFBZSxDQUFDMkIsSUFBSSxJQUFJM0IscURBQWMsQ0FBQyxRQUFRZSxXQUFXQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmVhdXR5LWVjb21tZXJjZS8uL3NyYy9tb2RlbHMvQ2FydC5qcz8yZjEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcblxyXG5jb25zdCBDYXJ0SXRlbVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gIHByb2R1Y3RJZDoge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IHRydWVcclxuICB9LFxyXG4gIG5hbWU6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgfSxcclxuICBwcmljZToge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgcmVxdWlyZWQ6IHRydWVcclxuICB9LFxyXG4gIGltYWdlOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogZmFsc2UsXHJcbiAgICBkZWZhdWx0OiAnaHR0cHM6Ly92aWEucGxhY2Vob2xkZXIuY29tLzE1MCdcclxuICB9LFxyXG4gIHF1YW50aXR5OiB7XHJcbiAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIG1pbjogWzEsICdRdWFudGl0eSBtdXN0IGJlIGF0IGxlYXN0IDEnXVxyXG4gIH1cclxufSwge1xyXG4gIF9pZDogZmFsc2VcclxufSk7XHJcblxyXG5jb25zdCBDYXJ0U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgdXNlcklkOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIHVuaXF1ZTogdHJ1ZVxyXG4gIH0sXHJcbiAgaXRlbXM6IFtDYXJ0SXRlbVNjaGVtYV0sXHJcbiAgdG90YWw6IHtcclxuICAgIHR5cGU6IE51bWJlcixcclxuICAgIGRlZmF1bHQ6IDBcclxuICB9LFxyXG4gIGl0ZW1Db3VudDoge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgZGVmYXVsdDogMFxyXG4gIH1cclxufSwge1xyXG4gIHRpbWVzdGFtcHM6IHRydWVcclxufSk7XHJcblxyXG4vLyBDYWxjdWxhdGUgdG90YWwgYW5kIGl0ZW0gY291bnQgYmVmb3JlIHNhdmluZ1xyXG5DYXJ0U2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uKG5leHQpIHtcclxuICB0aGlzLml0ZW1Db3VudCA9IHRoaXMuaXRlbXMucmVkdWNlKCh0b3RhbCwgaXRlbSkgPT4gdG90YWwgKyBpdGVtLnF1YW50aXR5LCAwKTtcclxuICB0aGlzLnRvdGFsID0gdGhpcy5pdGVtcy5yZWR1Y2UoKHRvdGFsLCBpdGVtKSA9PiB0b3RhbCArIChpdGVtLnByaWNlICogaXRlbS5xdWFudGl0eSksIDApO1xyXG4gIG5leHQoKTtcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuQ2FydCB8fCBtb25nb29zZS5tb2RlbCgnQ2FydCcsIENhcnRTY2hlbWEpO1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJDYXJ0SXRlbVNjaGVtYSIsIlNjaGVtYSIsInByb2R1Y3RJZCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm5hbWUiLCJwcmljZSIsIk51bWJlciIsImltYWdlIiwiZGVmYXVsdCIsInF1YW50aXR5IiwibWluIiwiX2lkIiwiQ2FydFNjaGVtYSIsInVzZXJJZCIsInVuaXF1ZSIsIml0ZW1zIiwidG90YWwiLCJpdGVtQ291bnQiLCJ0aW1lc3RhbXBzIiwicHJlIiwibmV4dCIsInJlZHVjZSIsIml0ZW0iLCJtb2RlbHMiLCJDYXJ0IiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Cart.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Order.js":
/*!*****************************!*\
  !*** ./src/models/Order.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst OrderNewSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    user: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'User',\n        required: true\n    },\n    orderNumber: {\n        type: String,\n        unique: true\n    },\n    items: [\n        {\n            productId: {\n                type: String,\n                required: true\n            },\n            product: {\n                type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n                ref: 'Product'\n            },\n            name: {\n                type: String,\n                required: true\n            },\n            quantity: {\n                type: Number,\n                required: true,\n                min: 1\n            },\n            price: {\n                type: Number,\n                required: true\n            },\n            total: {\n                type: Number,\n                required: true\n            }\n        }\n    ],\n    subtotal: {\n        type: Number,\n        required: true\n    },\n    tax: {\n        type: Number,\n        default: 0\n    },\n    shipping: {\n        type: Number,\n        default: 0\n    },\n    total: {\n        type: Number,\n        required: true\n    },\n    totalAmount: {\n        type: Number,\n        required: true\n    },\n    paymentMethod: {\n        type: String,\n        required: true,\n        enum: [\n            'khalti',\n            'cod',\n            'esewa',\n            'card'\n        ]\n    },\n    paymentStatus: {\n        type: String,\n        enum: [\n            'pending',\n            'completed',\n            'failed',\n            'refunded',\n            'cancelled'\n        ],\n        default: 'pending'\n    },\n    paymentDetails: {\n        pidx: String,\n        paymentUrl: String,\n        khaltiTransactionId: String,\n        paymentDate: Date,\n        failureReason: String,\n        verificationData: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.Mixed\n    },\n    shippingAddress: {\n        name: String,\n        phone: {\n            type: String,\n            required: true\n        },\n        email: String,\n        street: String,\n        city: String,\n        state: String,\n        zipCode: String,\n        country: {\n            type: String,\n            default: 'Nepal'\n        }\n    },\n    orderStatus: {\n        type: String,\n        enum: [\n            'pending',\n            'confirmed',\n            'processing',\n            'shipped',\n            'delivered',\n            'completed',\n            'cancelled'\n        ],\n        default: 'pending'\n    },\n    deliveryDate: Date,\n    notes: String,\n    cancellationReason: String\n}, {\n    timestamps: true\n});\n// Generate order number\nOrderNewSchema.pre('save', function(next) {\n    if (!this.orderNumber) {\n        this.orderNumber = 'PG' + Date.now() + Math.floor(Math.random() * 1000);\n    }\n    next();\n});\n// Calculate item totals\nOrderNewSchema.pre('save', function(next) {\n    if (this.items && this.items.length > 0) {\n        this.items.forEach((item)=>{\n            if (!item.total) {\n                item.total = item.quantity * item.price;\n            }\n        });\n    }\n    next();\n});\n// Add indexes for better performance\nOrderNewSchema.index({\n    user: 1,\n    createdAt: -1\n});\nOrderNewSchema.index({\n    orderNumber: 1\n});\nOrderNewSchema.index({\n    paymentStatus: 1\n});\nOrderNewSchema.index({\n    orderStatus: 1\n});\n// Export with proper cache handling\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Order || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Order', OrderNewSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBSyxHQUFHdUMsS0FBSzNDLFFBQVEsR0FBRzJDLEtBQUt4QyxLQUFLO1lBQ3pDO1FBQ0Y7SUFDRjtJQUNBaUM7QUFDRjtBQUVBLHFDQUFxQztBQUNyQ25ELGVBQWUyRCxLQUFLLENBQUM7SUFBRXpELE1BQU07SUFBRzBELFdBQVcsQ0FBQztBQUFFO0FBQzlDNUQsZUFBZTJELEtBQUssQ0FBQztJQUFFbkQsYUFBYTtBQUFFO0FBQ3RDUixlQUFlMkQsS0FBSyxDQUFDO0lBQUVoQyxlQUFlO0FBQUU7QUFDeEMzQixlQUFlMkQsS0FBSyxDQUFDO0lBQUVkLGFBQWE7QUFBRTtBQUV0QyxvQ0FBb0M7QUFDcEMsaUVBQWU5Qyx3REFBZSxDQUFDK0QsS0FBSyxJQUFJL0QscURBQWMsQ0FBQyxTQUFTQyxlQUFlQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmVhdXR5LWVjb21tZXJjZS8uL3NyYy9tb2RlbHMvT3JkZXIuanM/NzJkMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnXHJcblxyXG5jb25zdCBPcmRlck5ld1NjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gIHVzZXI6IHtcclxuICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgIHJlZjogJ1VzZXInLFxyXG4gICAgcmVxdWlyZWQ6IHRydWVcclxuICB9LFxyXG4gIG9yZGVyTnVtYmVyOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICB1bmlxdWU6IHRydWVcclxuICB9LFxyXG4gIGl0ZW1zOiBbe1xyXG4gICAgcHJvZHVjdElkOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgcmVxdWlyZWQ6IHRydWVcclxuICAgIH0sXHJcbiAgICBwcm9kdWN0OiB7XHJcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgICAgcmVmOiAnUHJvZHVjdCdcclxuICAgICAgLy8gUmVtb3ZlIHJlcXVpcmVkOiBmYWxzZSBhbmQgbWFrZSBpdCBjb21wbGV0ZWx5IG9wdGlvbmFsXHJcbiAgICB9LFxyXG4gICAgbmFtZToge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgcXVhbnRpdHk6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgbWluOiAxXHJcbiAgICB9LFxyXG4gICAgcHJpY2U6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgfSxcclxuICAgIHRvdGFsOiB7XHJcbiAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgcmVxdWlyZWQ6IHRydWVcclxuICAgIH1cclxuICB9XSxcclxuICBzdWJ0b3RhbDoge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgcmVxdWlyZWQ6IHRydWVcclxuICB9LFxyXG4gIHRheDoge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgZGVmYXVsdDogMFxyXG4gIH0sXHJcbiAgc2hpcHBpbmc6IHtcclxuICAgIHR5cGU6IE51bWJlcixcclxuICAgIGRlZmF1bHQ6IDBcclxuICB9LFxyXG4gIHRvdGFsOiB7XHJcbiAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICByZXF1aXJlZDogdHJ1ZVxyXG4gIH0sXHJcbiAgdG90YWxBbW91bnQ6IHtcclxuICAgIHR5cGU6IE51bWJlcixcclxuICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgfSxcclxuICBwYXltZW50TWV0aG9kOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIGVudW06IFsna2hhbHRpJywgJ2NvZCcsICdlc2V3YScsICdjYXJkJ11cclxuICB9LFxyXG4gIHBheW1lbnRTdGF0dXM6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIGVudW06IFsncGVuZGluZycsICdjb21wbGV0ZWQnLCAnZmFpbGVkJywgJ3JlZnVuZGVkJywgJ2NhbmNlbGxlZCddLFxyXG4gICAgZGVmYXVsdDogJ3BlbmRpbmcnXHJcbiAgfSxcclxuICBwYXltZW50RGV0YWlsczoge1xyXG4gICAgcGlkeDogU3RyaW5nLFxyXG4gICAgcGF5bWVudFVybDogU3RyaW5nLFxyXG4gICAga2hhbHRpVHJhbnNhY3Rpb25JZDogU3RyaW5nLFxyXG4gICAgcGF5bWVudERhdGU6IERhdGUsXHJcbiAgICBmYWlsdXJlUmVhc29uOiBTdHJpbmcsXHJcbiAgICB2ZXJpZmljYXRpb25EYXRhOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuTWl4ZWRcclxuICB9LFxyXG4gIHNoaXBwaW5nQWRkcmVzczoge1xyXG4gICAgbmFtZTogU3RyaW5nLFxyXG4gICAgcGhvbmU6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgfSxcclxuICAgIGVtYWlsOiBTdHJpbmcsXHJcbiAgICBzdHJlZXQ6IFN0cmluZyxcclxuICAgIGNpdHk6IFN0cmluZyxcclxuICAgIHN0YXRlOiBTdHJpbmcsXHJcbiAgICB6aXBDb2RlOiBTdHJpbmcsXHJcbiAgICBjb3VudHJ5OiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgZGVmYXVsdDogJ05lcGFsJ1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgb3JkZXJTdGF0dXM6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIGVudW06IFsncGVuZGluZycsICdjb25maXJtZWQnLCAncHJvY2Vzc2luZycsICdzaGlwcGVkJywgJ2RlbGl2ZXJlZCcsICdjb21wbGV0ZWQnLCAnY2FuY2VsbGVkJ10sXHJcbiAgICBkZWZhdWx0OiAncGVuZGluZydcclxuICB9LFxyXG4gIGRlbGl2ZXJ5RGF0ZTogRGF0ZSxcclxuICBub3RlczogU3RyaW5nLFxyXG4gIGNhbmNlbGxhdGlvblJlYXNvbjogU3RyaW5nXHJcbn0sIHtcclxuICB0aW1lc3RhbXBzOiB0cnVlXHJcbn0pXHJcblxyXG4vLyBHZW5lcmF0ZSBvcmRlciBudW1iZXJcclxuT3JkZXJOZXdTY2hlbWEucHJlKCdzYXZlJywgZnVuY3Rpb24obmV4dCkge1xyXG4gIGlmICghdGhpcy5vcmRlck51bWJlcikge1xyXG4gICAgdGhpcy5vcmRlck51bWJlciA9ICdQRycgKyBEYXRlLm5vdygpICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMClcclxuICB9XHJcbiAgbmV4dCgpXHJcbn0pXHJcblxyXG4vLyBDYWxjdWxhdGUgaXRlbSB0b3RhbHNcclxuT3JkZXJOZXdTY2hlbWEucHJlKCdzYXZlJywgZnVuY3Rpb24obmV4dCkge1xyXG4gIGlmICh0aGlzLml0ZW1zICYmIHRoaXMuaXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICBpZiAoIWl0ZW0udG90YWwpIHtcclxuICAgICAgICBpdGVtLnRvdGFsID0gaXRlbS5xdWFudGl0eSAqIGl0ZW0ucHJpY2VcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcbiAgbmV4dCgpXHJcbn0pXHJcblxyXG4vLyBBZGQgaW5kZXhlcyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXHJcbk9yZGVyTmV3U2NoZW1hLmluZGV4KHsgdXNlcjogMSwgY3JlYXRlZEF0OiAtMSB9KVxyXG5PcmRlck5ld1NjaGVtYS5pbmRleCh7IG9yZGVyTnVtYmVyOiAxIH0pXHJcbk9yZGVyTmV3U2NoZW1hLmluZGV4KHsgcGF5bWVudFN0YXR1czogMSB9KVxyXG5PcmRlck5ld1NjaGVtYS5pbmRleCh7IG9yZGVyU3RhdHVzOiAxIH0pXHJcblxyXG4vLyBFeHBvcnQgd2l0aCBwcm9wZXIgY2FjaGUgaGFuZGxpbmdcclxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLk9yZGVyIHx8IG1vbmdvb3NlLm1vZGVsKCdPcmRlcicsIE9yZGVyTmV3U2NoZW1hKVxyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJPcmRlck5ld1NjaGVtYSIsIlNjaGVtYSIsInVzZXIiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwib3JkZXJOdW1iZXIiLCJTdHJpbmciLCJ1bmlxdWUiLCJpdGVtcyIsInByb2R1Y3RJZCIsInByb2R1Y3QiLCJuYW1lIiwicXVhbnRpdHkiLCJOdW1iZXIiLCJtaW4iLCJwcmljZSIsInRvdGFsIiwic3VidG90YWwiLCJ0YXgiLCJkZWZhdWx0Iiwic2hpcHBpbmciLCJ0b3RhbEFtb3VudCIsInBheW1lbnRNZXRob2QiLCJlbnVtIiwicGF5bWVudFN0YXR1cyIsInBheW1lbnREZXRhaWxzIiwicGlkeCIsInBheW1lbnRVcmwiLCJraGFsdGlUcmFuc2FjdGlvbklkIiwicGF5bWVudERhdGUiLCJEYXRlIiwiZmFpbHVyZVJlYXNvbiIsInZlcmlmaWNhdGlvbkRhdGEiLCJNaXhlZCIsInNoaXBwaW5nQWRkcmVzcyIsInBob25lIiwiZW1haWwiLCJzdHJlZXQiLCJjaXR5Iiwic3RhdGUiLCJ6aXBDb2RlIiwiY291bnRyeSIsIm9yZGVyU3RhdHVzIiwiZGVsaXZlcnlEYXRlIiwibm90ZXMiLCJjYW5jZWxsYXRpb25SZWFzb24iLCJ0aW1lc3RhbXBzIiwicHJlIiwibmV4dCIsIm5vdyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxlbmd0aCIsImZvckVhY2giLCJpdGVtIiwiaW5kZXgiLCJjcmVhdGVkQXQiLCJtb2RlbHMiLCJPcmRlciIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Order.js\n");

/***/ }),

/***/ "(rsc)/./src/models/User.js":
/*!****************************!*\
  !*** ./src/models/User.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst userSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    name: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true,\n        lowercase: true,\n        trim: true\n    },\n    password: {\n        type: String,\n        required: true,\n        minlength: 6\n    },\n    phone: {\n        type: String,\n        trim: true\n    },\n    address: {\n        street: String,\n        city: String,\n        state: String,\n        zipCode: String,\n        country: String\n    },\n    role: {\n        type: String,\n        enum: [\n            'user',\n            'admin'\n        ],\n        default: 'user'\n    },\n    isActive: {\n        type: Boolean,\n        default: true\n    },\n    lastLogin: {\n        type: Date\n    }\n}, {\n    timestamps: true\n});\n// Hash password before saving\nuserSchema.pre('save', async function(next) {\n    if (!this.isModified('password')) return next();\n    try {\n        const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().genSalt(12);\n        this.password = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(this.password, salt);\n        next();\n    } catch (error) {\n        next(error);\n    }\n});\n// Compare password method\nuserSchema.methods.comparePassword = async function(candidatePassword) {\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(candidatePassword, this.password);\n};\n// Remove password from JSON output\nuserSchema.methods.toJSON = function() {\n    const userObject = this.toObject();\n    delete userObject.password;\n    return userObject;\n};\nconst User = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('User', userSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (User);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL1VzZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0I7QUFDRjtBQUU3QixNQUFNRSxhQUFhLElBQUlGLHdEQUFlLENBQUM7SUFDckNJLE1BQU07UUFDSkMsTUFBTUM7UUFDTkMsVUFBVTtRQUNWQyxNQUFNO0lBQ1I7SUFDQUMsT0FBTztRQUNMSixNQUFNQztRQUNOQyxVQUFVO1FBQ1ZHLFFBQVE7UUFDUkMsV0FBVztRQUNYSCxNQUFNO0lBQ1I7SUFDQUksVUFBVTtRQUNSUCxNQUFNQztRQUNOQyxVQUFVO1FBQ1ZNLFdBQVc7SUFDYjtJQUNBQyxPQUFPO1FBQ0xULE1BQU1DO1FBQ05FLE1BQU07SUFDUjtJQUNBTyxTQUFTO1FBQ1BDLFFBQVFWO1FBQ1JXLE1BQU1YO1FBQ05ZLE9BQU9aO1FBQ1BhLFNBQVNiO1FBQ1RjLFNBQVNkO0lBQ1g7SUFDQWUsTUFBTTtRQUNKaEIsTUFBTUM7UUFDTmdCLE1BQU07WUFBQztZQUFRO1NBQVE7UUFDdkJDLFNBQVM7SUFDWDtJQUNBQyxVQUFVO1FBQ1JuQixNQUFNb0I7UUFDTkYsU0FBUztJQUNYO0lBQ0FHLFdBQVc7UUFDVHJCLE1BQU1zQjtJQUNSO0FBQ0YsR0FBRztJQUNEQyxZQUFZO0FBQ2Q7QUFFQSw4QkFBOEI7QUFDOUIxQixXQUFXMkIsR0FBRyxDQUFDLFFBQVEsZUFBZUMsSUFBSTtJQUN4QyxJQUFJLENBQUMsSUFBSSxDQUFDQyxVQUFVLENBQUMsYUFBYSxPQUFPRDtJQUV6QyxJQUFJO1FBQ0YsTUFBTUUsT0FBTyxNQUFNL0IsdURBQWMsQ0FBQztRQUNsQyxJQUFJLENBQUNXLFFBQVEsR0FBRyxNQUFNWCxvREFBVyxDQUFDLElBQUksQ0FBQ1csUUFBUSxFQUFFb0I7UUFDakRGO0lBQ0YsRUFBRSxPQUFPSyxPQUFPO1FBQ2RMLEtBQUtLO0lBQ1A7QUFDRjtBQUVBLDBCQUEwQjtBQUMxQmpDLFdBQVdrQyxPQUFPLENBQUNDLGVBQWUsR0FBRyxlQUFlQyxpQkFBaUI7SUFDbkUsT0FBTyxNQUFNckMsdURBQWMsQ0FBQ3FDLG1CQUFtQixJQUFJLENBQUMxQixRQUFRO0FBQzlEO0FBRUEsbUNBQW1DO0FBQ25DVixXQUFXa0MsT0FBTyxDQUFDSSxNQUFNLEdBQUc7SUFDMUIsTUFBTUMsYUFBYSxJQUFJLENBQUNDLFFBQVE7SUFDaEMsT0FBT0QsV0FBVzdCLFFBQVE7SUFDMUIsT0FBTzZCO0FBQ1Q7QUFFQSxNQUFNRSxPQUFPM0Msd0RBQWUsQ0FBQzJDLElBQUksSUFBSTNDLHFEQUFjLENBQUMsUUFBUUU7QUFFNUQsaUVBQWV5QyxJQUFJQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmVhdXR5LWVjb21tZXJjZS8uL3NyYy9tb2RlbHMvVXNlci5qcz83ZDBiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSdcclxuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcydcclxuXHJcbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICBuYW1lOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIHRyaW06IHRydWVcclxuICB9LFxyXG4gIGVtYWlsOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIHVuaXF1ZTogdHJ1ZSxcclxuICAgIGxvd2VyY2FzZTogdHJ1ZSxcclxuICAgIHRyaW06IHRydWVcclxuICB9LFxyXG4gIHBhc3N3b3JkOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIG1pbmxlbmd0aDogNlxyXG4gIH0sXHJcbiAgcGhvbmU6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHRyaW06IHRydWVcclxuICB9LFxyXG4gIGFkZHJlc3M6IHtcclxuICAgIHN0cmVldDogU3RyaW5nLFxyXG4gICAgY2l0eTogU3RyaW5nLFxyXG4gICAgc3RhdGU6IFN0cmluZyxcclxuICAgIHppcENvZGU6IFN0cmluZyxcclxuICAgIGNvdW50cnk6IFN0cmluZ1xyXG4gIH0sXHJcbiAgcm9sZToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgZW51bTogWyd1c2VyJywgJ2FkbWluJ10sXHJcbiAgICBkZWZhdWx0OiAndXNlcidcclxuICB9LFxyXG4gIGlzQWN0aXZlOiB7XHJcbiAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgZGVmYXVsdDogdHJ1ZVxyXG4gIH0sXHJcbiAgbGFzdExvZ2luOiB7XHJcbiAgICB0eXBlOiBEYXRlXHJcbiAgfVxyXG59LCB7XHJcbiAgdGltZXN0YW1wczogdHJ1ZVxyXG59KVxyXG5cclxuLy8gSGFzaCBwYXNzd29yZCBiZWZvcmUgc2F2aW5nXHJcbnVzZXJTY2hlbWEucHJlKCdzYXZlJywgYXN5bmMgZnVuY3Rpb24obmV4dCkge1xyXG4gIGlmICghdGhpcy5pc01vZGlmaWVkKCdwYXNzd29yZCcpKSByZXR1cm4gbmV4dCgpXHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdCgxMilcclxuICAgIHRoaXMucGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh0aGlzLnBhc3N3b3JkLCBzYWx0KVxyXG4gICAgbmV4dCgpXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIG5leHQoZXJyb3IpXHJcbiAgfVxyXG59KVxyXG5cclxuLy8gQ29tcGFyZSBwYXNzd29yZCBtZXRob2RcclxudXNlclNjaGVtYS5tZXRob2RzLmNvbXBhcmVQYXNzd29yZCA9IGFzeW5jIGZ1bmN0aW9uKGNhbmRpZGF0ZVBhc3N3b3JkKSB7XHJcbiAgcmV0dXJuIGF3YWl0IGJjcnlwdC5jb21wYXJlKGNhbmRpZGF0ZVBhc3N3b3JkLCB0aGlzLnBhc3N3b3JkKVxyXG59XHJcblxyXG4vLyBSZW1vdmUgcGFzc3dvcmQgZnJvbSBKU09OIG91dHB1dFxyXG51c2VyU2NoZW1hLm1ldGhvZHMudG9KU09OID0gZnVuY3Rpb24oKSB7XHJcbiAgY29uc3QgdXNlck9iamVjdCA9IHRoaXMudG9PYmplY3QoKVxyXG4gIGRlbGV0ZSB1c2VyT2JqZWN0LnBhc3N3b3JkXHJcbiAgcmV0dXJuIHVzZXJPYmplY3RcclxufVxyXG5cclxuY29uc3QgVXNlciA9IG1vbmdvb3NlLm1vZGVscy5Vc2VyIHx8IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgdXNlclNjaGVtYSlcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVzZXJcclxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiYmNyeXB0IiwidXNlclNjaGVtYSIsIlNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ0cmltIiwiZW1haWwiLCJ1bmlxdWUiLCJsb3dlcmNhc2UiLCJwYXNzd29yZCIsIm1pbmxlbmd0aCIsInBob25lIiwiYWRkcmVzcyIsInN0cmVldCIsImNpdHkiLCJzdGF0ZSIsInppcENvZGUiLCJjb3VudHJ5Iiwicm9sZSIsImVudW0iLCJkZWZhdWx0IiwiaXNBY3RpdmUiLCJCb29sZWFuIiwibGFzdExvZ2luIiwiRGF0ZSIsInRpbWVzdGFtcHMiLCJwcmUiLCJuZXh0IiwiaXNNb2RpZmllZCIsInNhbHQiLCJnZW5TYWx0IiwiaGFzaCIsImVycm9yIiwibWV0aG9kcyIsImNvbXBhcmVQYXNzd29yZCIsImNhbmRpZGF0ZVBhc3N3b3JkIiwiY29tcGFyZSIsInRvSlNPTiIsInVzZXJPYmplY3QiLCJ0b09iamVjdCIsIlVzZXIiLCJtb2RlbHMiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/models/User.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/jws","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/bcryptjs","vendor-chunks/safe-buffer","vendor-chunks/ms","vendor-chunks/lodash.once","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/jwa","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpayment%2Froute&page=%2Fapi%2Fpayment%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment%2Froute.js&appDir=D%3A%5CNew%20folder%5Cproject%20dbms%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CNew%20folder%5Cproject%20dbms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();